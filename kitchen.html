<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Kitchen Screen</title>

<style>
body{
  font-family: Arial;
  background:#111;
  color:white;
  padding:20px;
}

.order{
  background:#222;
  padding:15px;
  margin:10px 0;
  border-radius:10px;
}

.pending{border-left:8px solid yellow;}
.preparing{border-left:8px solid blue;}
.done{border-left:8px solid green;}

select{
  font-size:16px;
  padding:5px;
}
</style>
</head>

<body>

<h1>üçú Kitchen Orders</h1>

<div id="orders"></div>

<script>

const SHEET_API =
"https://script.google.com/macros/s/AKfycbxiS-WwDdEI711nSCb6YYYtvYXWsjnh8W1lZ7IkuLWYdrZfSXDRpoatikcT_SUVlcrR/exec";

function loadOrders(){

fetch(SHEET_API + "?t=" + new Date().getTime(), {
  method: "GET",
  mode: "cors"
})

.then(res => res.text())
.then(text => {

  let data = JSON.parse(text);

  let container = document.getElementById("orders");
  container.innerHTML = "";

  if(!data || data.length === 0){
    container.innerHTML = "<h3>No Orders Yet</h3>";
    return;
  }

  data.reverse().forEach(order => {

    let card = document.createElement("div");
    card.className = "order-card";

    card.innerHTML = `
      <h2>Table ${order.table}</h2>
      <p>${order.items}</p>
      <h3>RM ${order.total}</h3>
      <p>Status: ${order.status}</p>
      <p>Status:</p>

<select onchange="updateStatus('${order.id}',this.value)">
<option ${order.status=="Pending"?"selected":""}>Pending</option>
<option ${order.status=="Preparing"?"selected":""}>Preparing</option>
<option ${order.status=="Done"?"selected":""}>Done</option>
<option ${order.status=="Cancel"?"selected":""}>Cancel</option>
</select>

      <hr>
    `;

    container.appendChild(card);
  });

})
.catch(err=>{
  console.error("LOAD ERROR:", err);
});

}

// auto refresh every 5 seconds
setInterval(loadOrders, 5000);

// first load
loadOrders();


</script>

</body>
</html>
